<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title></title>
<link rel="stylesheet" href="http://apps.bdimg.com/libs/fontawesome/4.4.0/css/font-awesome.min.css">
<style>
#main{
	margin:auto;
	width:900px;
	height:400px;
}
#target{
	float:left;
	width:800px;
	height:400px;
	background:url(map.png);

}
#source{
	width: 100px;
	float: left;
	text-align: center;
	height: 100px;
	margin: 150px auto;
	line-height: 100px;
}
.source-icon{
	color:gray;
	cursor:move;
}
.source-icon .title{
	font-size:x-small;
}

#target .source-icon{
	color: blue;
	margin: 10px 0px;
	font-size: x-small;
	height: 60px;
	line-height: 22px;
	font-weight:bold;
}
.target{
	float:left;
	width:80px;
	height:80px;
	line-height:80px;
	border:0.5px #a2a2a2;
	text-align: center;
	box-sizing: border-box;
	border-style: dashed;
}
#source-create{
	font-size:x-small;
	line-height:15px;
}

textarea.title{
	border:none;
	text-align: center;
	word-break:break-all;
	background:none;
	resize:none;
	overflow:hidden;
}
</style>
</head>
<body>
<div id="main">
	<div id="source">
		<span id="source-icon" class="source-icon fa fa-map-pin"><br /><textarea placeholder="在这里输入景点" class="title" cols="3" rows="2" maxlength="8"/></textarea>
		</div>
		<div id="target"></div>
	</div>
	</body>
	<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
	<script>
var sourceIcon = document.getElementsByClassName("source-icon");		//拖放源
var target = document.getElementById("target");  //大目标范围
var sNum = 0;  //设置拖拽源的值为0

for(var i = 1;i<=50;i++){                      //创建拖拽目标的定位宫格
	var tr = document.createElement("div");
	tr.className = "target";
	tr.id = "target"  +  i;
	tr.ondragover = function (event){           //允许拖拽设置
		allowDrop(event);
	};	
	tr.ondrop = function (event){								//拖拽动作
		drop(event);
	};
	target.appendChild(tr);
};
sourceIcon[0].draggable = true;  					//初始化拖拽
onMake();
function onMake(){
for(var i in sourceIcon){
sourceIcon[i].index = i;
sourceIcon[i].ondragstart = function dragstart(event){
	drag(event);														//拖拽准备
	make();
	sourceIcon[this.index].draggable = false;  					//允许拖拽
	sourceIcon[this.index].ondragstart = false;  					//允许拖拽
};
};
};

function make(){													//创建元素
	sNum+=1;
	var source = document.createElement("span");
	source.id="source-icon"+sNum;
	source.className="source-icon fa fa-map-pin";
	source.innerHTML ="<br /><textarea placeholder=\"在这里输入景点\" class=\"title\" cols=\"3\" rows=\"2\" maxlength=\"8\"/>";
	source.draggable = true;
	document.getElementById("source").appendChild(source);
	onMake();															//回调遍历函数	
};

function drag(ev){														//拖拽准备
	ev.dataTransfer.setData("text",event.target.id);
}     

function allowDrop(ev) {                 //允许拖拽，清理默认
	ev.preventDefault();
}

function drop(ev) {											//拖拽动作实现并完成数据接收	
	ev.preventDefault();
	var data = ev.dataTransfer.getData("text");
	ev.target.appendChild(document.getElementById(data));
}
	</script>
	</html>
